(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,a){e.exports=a(428)},207:function(e,t,a){},239:function(e,t,a){},297:function(e,t,a){},401:function(e,t,a){},402:function(e,t,a){},425:function(e,t,a){},426:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),c=(a(207),a(12)),i=a(13),l=a(16),u=a(14),d=a(17),m=a(432),p=a(431),h=a(24),f=(a(212),a(198)),v=(a(215),a(93)),b=(a(56),a(10)),E=a(19),O=a.n(E),g=a(26),y=a(187),j=a.n(y),T=a(200),k="";k="/tomato-alarm-clock";var w=Object(T.a)({basename:k}),D=j.a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"MNfCKaMASVLM9FtTfZhbTbDr","t-app-secret":"N1JyRcHLuuZR7MQ5Lc16Qh98"}});D.interceptors.request.use(function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return console.log(e),Promise.reject(e)}),D.interceptors.response.use(function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e},function(e){return console.log(e.response),401===e.response.status?(console.log("\u54cd\u5e94\u9519\u8bef\uff0c\u672a\u6388\u6743\uff0c\u91cd\u5b9a\u5411...."),w.push("/login")):e.response.status,Promise.reject(e)});var C=D,N=(a(239),a(131),a(91)),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleCancel=function(){a.setState({visible:!1})},a.state={visible:a.props.show},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({visible:this.props.show})}},{key:"render",value:function(){return r.a.createElement(N.a,{title:"\u4e2a\u4eba\u4fe1\u606f",visible:this.state.visible,footer:null,onCancel:this.handleCancel},r.a.createElement("p",null,"\u59d3\u540d\uff1a ",this.props.account))}}]),t}(n.Component),M=(a(68),a(30)),I=function(e){return{type:"TODO/MODIFY",item:e}},A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onKeyUp=function(e){13===e.keyCode&&""!==a.state.description&&a.postAndAdd()},a.postAndAdd=Object(g.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("todos",{description:a.state.description.trim()});case 3:t=e.sent,a.props.addTodo(Object.assign({},t.data.resource,{editEnable:!1})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:a.setState({description:""});case 11:case"end":return e.stop()}},e,this,[[0,7]])})),a.state={description:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.description,a=t?r.a.createElement(b.a,{type:"close-circle",onClick:function(){return e.setState({description:""})}}):r.a.createElement("span",null);return r.a.createElement("div",{id:"addtodo"},r.a.createElement(M.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:a,value:t,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.onKeyUp}))}}]),t}(n.Component),S=Object(h.b)(null,function(e){return{addTodo:function(t){e(function(e){return{type:"TODO/ADD",item:e}}(t))}}})(A),_=a(75),Y=(a(290),a(199)),U=(a(125),a(92)),H=a(4),L=a.n(H),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateTodo=Object(g.a)(O.a.mark(function e(){var t,n,r=arguments;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=r.length>0&&void 0!==r[0]?r[0]:{}).completed_at=t.completed?new Date:null,e.prev=2,e.next=5,C.patch("todos/".concat(a.props.id),t);case 5:n=e.sent,a.props.update(Object.assign({},n.data.resource,{editEnable:!1})),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])})),a.toggle=function(e){a.updateTodo({completed:e.target.checked})},a.doubleClickText=function(){a.props.editTodo(a.props.id)},a.clickEnter=function(){""!==a.state.text?a.updateTodo({description:a.state.text}):a.updateTodo({deleted:!0})},a.keyDown=function(e){13===e.keyCode&&(console.log("press enter...."),e.preventDefault(),a.clickEnter())},a.deleteItem=function(){a.updateTodo({deleted:!0})},a.state={text:a.props.description},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=L()({todoItem:!0,editEnable:this.props.editEnable,completed:this.props.completed,deleted:this.props.deleted}),a=M.a.TextArea,n=r.a.createElement("div",{className:"editing"},r.a.createElement(a,{placeholder:"\u70b9\u51fb\u56de\u8f66\u5220\u9664\u6b64\u4efb\u52a1",value:this.state.text,className:"inputBox",onKeyDown:this.keyDown,onChange:function(t){return e.setState({text:t.target.value})},autosize:{minRows:1,maxRows:6}}),r.a.createElement("div",{className:"iconWrapper"},r.a.createElement(b.a,{type:"enter",className:"enter",onClick:this.clickEnter}),r.a.createElement(U.a,{title:"\u5220\u9664\u4efb\u52a1"},r.a.createElement(b.a,{type:"delete",theme:"filled",onClick:this.deleteItem})))),o=r.a.createElement("div",{className:"text",onDoubleClick:this.doubleClickText}," ",this.state.text," ");return r.a.createElement("div",{id:"todoItem",className:t},r.a.createElement(Y.a,{checked:this.props.completed,onChange:this.toggle,className:"checkBox"}),this.props.editEnable?n:o)}}]),t}(n.Component),B=Object(h.b)(function(e,t){return Object(_.a)({},t)},function(e){return{update:function(t){return e(I(t))},editTodo:function(t){return e(function(e){return{type:"TODO/EDIT_ENABLE",id:e}}(t))}}})(P),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).checkCompleted=function(){a.setState({showCompleted:!a.state.showCompleted})},a.state={showCompleted:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=L()({show:this.state.showCompleted});return r.a.createElement("div",{id:"todoList"},r.a.createElement("div",{id:"uncompletedList"},this.unCompletedTodos.map(function(e){return r.a.createElement(B,Object.assign({key:e.id},e))})),r.a.createElement("div",{className:"completedHeader",onClick:this.checkCompleted},r.a.createElement("span",{className:"text"},this.state.showCompleted?r.a.createElement(b.a,{type:"down"}):r.a.createElement(b.a,{type:"right"}),"\u6700\u8fd1\u5b8c\u6210\u7684\u4efb\u52a1")),r.a.createElement("div",{id:"completedList",className:e},this.completedTodos.map(function(e){return r.a.createElement(B,Object.assign({key:e.id},e))})))}},{key:"unDeletedTodos",get:function(){return this.props.todoItems.filter(function(e){return!e.deleted})}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter(function(e){return!e.completed})}},{key:"completedTodos",get:function(){return this.unDeletedTodos.filter(function(e){return e.completed})}}]),t}(n.Component),W=Object(h.b)(function(e){return{todoItems:e.todos}})(F),K=(a(297),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"todos"},r.a.createElement(S,null),r.a.createElement(W,null))}}]),t}(n.Component)),R=a(64),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TODO/ADD":return[t.item].concat(Object(R.a)(e));case"TODO/INIT":return t.items;case"TODO/MODIFY":return e.map(function(e){return t.item.id===e.id?t.item:e});case"TODO/EDIT_ENABLE":return e.map(function(e){return t.id===e.id?Object(_.a)({},e,{editEnable:!0}):Object(_.a)({},e,{editEnable:!1})});default:return e}},z=(a(55),a(22)),Q=null,Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={curtime:a.props.originTime},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Q=setInterval(function(){e.setState({curtime:e.state.curtime-1}),document.title="".concat(e.time,"-\u756a\u8304\u95f9\u949f"),e.state.curtime<0&&(e.setState({curtime:0}),clearInterval(Q),e.props.finish(),document.title="\u756a\u8304\u95f9\u949f")},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(Q),console.log("clear timer.....")}},{key:"render",value:function(){var e=this.state.curtime/this.props.duration*100+"%";return r.a.createElement("div",{className:"countDown"},r.a.createElement("div",{className:"timeText"},this.time),r.a.createElement("div",{className:"progress",style:{right:e}}),r.a.createElement(b.a,{type:"close-circle",className:"closeIcon",onClick:this.props.confirm}))}},{key:"time",get:function(){return function(e){var t=""+Math.floor(e/60),a=""+Math.floor(e%60);return(t=1===t.length?"0"+t:t)+" : "+(a=1===a.length?"0"+a:a)}(this.state.curtime)}}]),t}(r.a.Component),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).keyUp=function(e){13===e.keyCode&&""!==a.state.description&&(console.log("submit input context"),a.updateTomatoDetail({description:a.state.description,ended_at:new Date}),a.setState({description:""}))},a.updateTomatoDetail=function(e){C.patch("tomatoes/".concat(a.props.unfinishedTomato.id),e).then(function(e){a.props.updateTomato(e.data.resource),console.log(e.data.resource)}).catch(function(e){throw console.log("err"),new Error(e)})},a.abortTomato=function(){a.updateTomatoDetail({aborted:!0}),document.title="\u756a\u8304\u95f9\u949f"},a.onFinish=function(){a.forceUpdate()},a.showConfirm=function(){(0,N.a.confirm)({title:"\u60a8\u76ee\u524d\u6b63\u5728\u4e00\u4e2a\u756a\u8304\u5de5\u4f5c\u65f6\u95f4\u4e2d\uff0c\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){console.log("click ok"),a.abortTomato()},onCancel:function(){console.log("click Cancel")}})},a.state={description:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",null);if(void 0===this.props.unfinishedTomato)t=r.a.createElement(z.a,{className:"startClock",onClick:this.props.startTomato},"\u5f00\u59cb\u756a\u8304");else{var a=this.props.unfinishedTomato,n=a.started_at,o=a.duration,s=(new Date).getTime();if(s-Date.parse(n)>o)t=r.a.createElement("div",{className:"inputWrap"},r.a.createElement(M.a,{value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.keyUp,placeholder:"\u4f60\u521a\u521a\u5b8c\u6210\u4e86\u4ec0\u4e48\u5de5\u4f5c\uff1f",className:"text"}),r.a.createElement(b.a,{type:"close-circle",className:"closeIcon",onClick:this.showConfirm}));else{var c=Math.floor((o-(s-Date.parse(n)))/1e3);t=r.a.createElement(Z,{originTime:c,finish:this.onFinish,confirm:this.showConfirm,duration:o/1e3})}}return r.a.createElement("div",{className:"handleTomato"},t)}}]),t}(n.Component),V=a(23),$=function(e){return r.a.createElement("div",{className:"tomatoDetail"},r.a.createElement("span",{className:"period"},Object(V.format)(new Date(e.started_at),"HH:mm"),"-",Object(V.format)(new Date(e.ended_at),"HH:mm")," "),r.a.createElement("span",{className:"jobDetail"},e.description))},G=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.dates.map(function(t,a){var n=e.props.finishedTomatoes[t].slice(0,3);return r.a.createElement("div",{className:"perDay",key:a+1},r.a.createElement("div",{className:"title"},r.a.createElement("span",{className:"date"},Object(V.format)(t,"M\u6708DD\u65e5")),r.a.createElement("span",{className:"constText"},"\u5b8c\u6210\u4e86",n.length,"\u4e2a\u756a\u8304")),n.map(function(e){return r.a.createElement($,Object.assign({key:e.id},e))}))});return r.a.createElement("div",{id:"tomatoList"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort(function(e,t){return Date.parse(t)-Date.parse(e)})}}]),t}(r.a.Component),X=a(45),ee=a.n(X),te=(a(401),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).startClock=Object(g.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("tomatoes",{duration:15e5});case 3:t=e.sent,a.props.addTomato(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"tomatoes"},r.a.createElement(q,{unfinishedTomato:this.firstUnFinishedTomato,startTomato:this.startClock,updateTomato:this.props.updateTomato}),r.a.createElement(G,{finishedTomatoes:this.finishedTomatoes}))}},{key:"firstUnFinishedTomato",get:function(){return this.props.tomatoes.filter(function(e){return!e.description&&!e.ended_at&&!e.aborted})[0]}},{key:"finishedTomatoes",get:function(){var e=Date.parse(Object(V.addDays)(new Date,-7)),t=this.props.tomatoes.filter(function(t){return t.description&&t.ended_at&&!t.aborted&&Date.parse(t.started_at)>e});return ee.a.groupBy(t,function(e){return Object(V.format)(new Date(e.started_at),"YYYY-MM-DD")})}}]),t}(n.Component)),ae=Object(h.b)(function(e){return{tomatoes:e.tomatoes}},function(e){return{addTomato:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(function(){return{type:"TOMATO/ADD",tomato:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}(t))},updateTomato:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(function(){return{type:"TOMATO/UPDATE",tomato:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}(t))}}})(te),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOMATO/INIT":return t.tomatoes;case"TOMATO/ADD":return[t.tomato].concat(Object(R.a)(e));case"TOMATO/UPDATE":return e.map(function(e){return e.id===t.tomato.id?t.tomato:e});default:return e}},re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getPoints=function(){var e=Object.keys(a.props.data).sort(function(e,t){return Date.parse(e)-Date.parse(t)}),t=e[0],n=Object(V.startOfToday)();if(t){var r=n.getTime()-Object(V.startOfDay)(new Date(t)).getTime(),o=0,s=60,c=e.map(function(e){var t=240-120*(n.getTime()-Object(V.startOfDay)(new Date(e)).getTime())/r,c=60*(1-(o+=a.props.data[e].length)/a.props.totalFinishedCount),i="".concat(t-5," ").concat(s,",").concat(t," ").concat(c);return s=c,i});return["0 60"].concat(Object(R.a)(c),["240 0","240 60"]).join(",")}return"0 60,120 60,240 60"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"polygon"},r.a.createElement("svg",null,r.a.createElement("polygon",{fill:"rgba(73,238,239,0.1)",stroke:"rgba(8,174,175,0.5)",strokeWidth:"1",points:this.getPoints()})))}}]),t}(r.a.Component),oe=(a(402),a(403),a(123)),se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).updateTodo=function(){var e=Object(g.a)(O.a.mark(function e(t){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.patch("todos/".concat(a.props.id),t);case 3:n=e.sent,a.props.update(Object.assign({},n.data.resource,{editEnable:!1})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("span",null);return"finished"===this.props.type?t=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(t){return e.updateTodo({completed:!1})}},"\u6062\u590d"),r.a.createElement("span",{onClick:function(t){return e.updateTodo({deleted:!0})}},"\u5220\u9664")):"deleted"===this.props.type&&(t=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(t){return e.updateTodo({deleted:!1})}},"\u6062\u590d"))),r.a.createElement("div",{className:"detail"},r.a.createElement("span",null,Object(V.format)(new Date(this.props.updated_at),"HH : mm")),r.a.createElement("span",null,this.props.description),t)}}]),t}(r.a.Component),ce=Object(h.b)(null,function(e){return{update:function(t){return e(I(t))}}})(se),ie=oe.a.TabPane,le=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=0,a=0,n=["\u5468\u5929","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],o=r.a.createElement("div",null,this.finishedDates.map(function(a){return r.a.createElement("div",{className:"finishedDate perdate",key:++t},r.a.createElement("div",{className:"abstract"},r.a.createElement("div",{className:"day"},r.a.createElement("span",null,a),r.a.createElement("span",null,n[new Date(a).getDay()])),r.a.createElement("div",{className:"count"},"\u5b8c\u6210\u4e86",e.dailyFinishedTodos[a].length,"\u4e2a\u4efb\u52a1")),r.a.createElement("div",{className:"detailList"},e.dailyFinishedTodos[a].map(function(e){return r.a.createElement(ce,Object.assign({key:e.id},e,{type:"finished"}))})))})),s=r.a.createElement("div",null,this.deletedDates.map(function(t){return r.a.createElement("div",{className:"deletedDate perdate",key:++a},r.a.createElement("div",{className:"abstract"},r.a.createElement("div",{className:"day"},r.a.createElement("span",null,t),r.a.createElement("span",null,n[new Date(t).getDay()])),r.a.createElement("div",{className:"count"},"\u522a\u9664\u4e86",e.dailyDeletedTodos[t].length,"\u4e2a\u4efb\u52a1")),r.a.createElement("div",{className:"detailList"},e.dailyDeletedTodos[t].map(function(e){return r.a.createElement(ce,Object.assign({key:e.id},e,{type:"deleted"}))})))})),c=L()({todoHistory:!0,show:this.props.show});return r.a.createElement("div",{className:c,id:"todoHistory"},r.a.createElement(oe.a,{defaultActiveKey:"1",type:"card"},r.a.createElement(ie,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52d9",key:"1"},o),r.a.createElement(ie,{tab:"\u5df2\u522a\u9664\u7684\u4efb\u52d9",key:"2"},s)))}},{key:"finishedTodos",get:function(){return this.props.todos.filter(function(e){return e.completed&&!e.deleted}).sort(function(e,t){return Date.parse(t.completed_at)-Date.parse(e.completed_at)})}},{key:"deletedTodos",get:function(){return this.props.todos.filter(function(e){return e.deleted}).sort(function(e,t){return Date.parse(t.updated_at)-Date.parse(e.updated_at)})}},{key:"dailyFinishedTodos",get:function(){return ee.a.groupBy(this.finishedTodos,function(e){return Object(V.format)(new Date(e.completed_at),"YYYY-MM-DD")})}},{key:"dailyDeletedTodos",get:function(){return ee.a.groupBy(this.deletedTodos,function(e){return Object(V.format)(new Date(e.updated_at),"YYYY-MM-DD")})}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTodos)}},{key:"deletedDates",get:function(){return Object.keys(this.dailyDeletedTodos)}}]),t}(r.a.Component),ue=Object(h.b)(function(e){return{todos:e.todos}})(le),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).clickHistory=function(e){switch(e.target.innerText){case"\u4efb\u52a1\u5386\u53f2":a.setState({showTodoHistory:!a.state.showTodoHistory})}},a.state={showTodoHistory:!1,showTomatoHistory:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"dataStatistics"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"topic"},"\u7edf\u8ba1"),r.a.createElement("div",{className:"graph"},r.a.createElement("div",{className:"text"},r.a.createElement("div",null,"\u4e00\u5468\u7d2f\u8ba1"),r.a.createElement("div",null,"0")))),r.a.createElement("li",null,r.a.createElement("div",{className:"topic"},"\u76ee\u6807"),r.a.createElement("div",{className:"graph"},r.a.createElement("div",{className:"text"},r.a.createElement("div",null,"\u4eca\u65e5\u76ee\u6807"),r.a.createElement("div",null,"0/8")))),r.a.createElement("li",null,r.a.createElement("div",{className:"topic"},"\u756a\u8304\u5386\u53f2"),r.a.createElement("div",{className:"graph"},r.a.createElement("div",{className:"text"},r.a.createElement("div",null,"\u7d2f\u8ba1\u5b8c\u6210\u756a\u8304"),r.a.createElement("div",null,this.finishedTomatoes.length)),r.a.createElement(re,{data:this.dailyTomatoes,totalFinishedCount:this.finishedTomatoes.length}))),r.a.createElement("li",null,r.a.createElement("div",{className:"topic",onClick:this.clickHistory},"\u4efb\u52a1\u5386\u53f2"),r.a.createElement("div",{className:"graph"},r.a.createElement("div",{className:"text"},r.a.createElement("div",null,"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1"),r.a.createElement("div",null,this.finishedTodos.length)),r.a.createElement(re,{data:this.dailyTodos,totalFinishedCount:this.finishedTodos.length})))),r.a.createElement(ue,{show:this.state.showTodoHistory}))}},{key:"finishedTodos",get:function(){return this.props.todos.filter(function(e){return e.completed&&!e.deleted})}},{key:"dailyTodos",get:function(){return ee.a.groupBy(this.finishedTodos,function(e){return Object(V.format)(new Date(e.completed_at),"YYYY-MM-DD")})}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter(function(e){return e.description&&e.ended_at&&!e.aborted})}},{key:"dailyTomatoes",get:function(){return ee.a.groupBy(this.finishedTomatoes,function(e){return Object(V.format)(new Date(e.ended_at),"YYYY-MM-DD")})}}]),t}(r.a.Component),me=Object(h.b)(function(e){return{todos:e.todos,tomatoes:e.tomatoes}})(de),pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTomatoList=Object(g.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("tomatoes");case 3:t=e.sent,a.props.initTomatoes(t.data.resources),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),a.getTodos=Object(g.a)(O.a.mark(function e(){var t,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("todos");case 3:t=e.sent,n=t.data.resources.map(function(e){return Object.assign({},e,{editEnable:!1})}),a.props.initTodos(n),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),a.getInfo=Object(g.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("me");case 3:t=e.sent,a.setState({user:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("\u5df2\u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\u9762...");case 10:case"end":return e.stop()}},e,this,[[0,7]])})),a.showModal=function(){a.setState({showModal:!0})},a.logout=function(){localStorage.setItem("x-token",""),w.push("/login")},a.state={user:{},showModal:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getInfo();case 2:return e.next=4,this.getTodos();case 4:return e.next=6,this.getTomatoList();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=r.a.createElement(v.a,null,r.a.createElement(v.a.Item,{key:"1",onClick:this.showModal},r.a.createElement(b.a,{type:"user"}),"\u4e2a\u4eba\u4fe1\u606f"),r.a.createElement(v.a.Item,{key:"2",onClick:this.logout},r.a.createElement(b.a,{type:"logout"}),"\u6ce8\u9500")),t=r.a.createElement(f.a,{overlay:e},r.a.createElement("span",{style:{marginLeft:12,cursor:"pointer"}},this.state.user&&this.state.user.account," ",r.a.createElement(b.a,{type:"down"})));return r.a.createElement("div",{id:"home"},r.a.createElement("header",null,r.a.createElement("span",{className:"logo"},"\u756a\u8304\u95f9\u949f"),t,r.a.createElement(x,{show:this.state.showModal,account:this.state.user&&this.state.user.account})),r.a.createElement("main",null,r.a.createElement(ae,null),r.a.createElement(K,null)),r.a.createElement(me,null))}}]),t}(n.Component),he={initTodos:function(e){return{type:"TODO/INIT",items:e}},initTomatoes:function(){return{type:"TOMATO/INIT",tomatoes:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}},fe=Object(h.b)(function(e){return{todos:e.todos,tomatoes:e.tomatoes}},he)(pe),ve=a(430),be=(a(425),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n={};n[e]=t,a.setState(n)},a.submit=Object(g.a)(O.a.mark(function e(){var t,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.userName,r=t.password,e.prev=1,e.next=4,C.post("sign_in/user",{account:n,password:r});case 4:a.setState({errorMessage:""}),console.log("login success...."),w.push("/"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("login error...."),a.setState({errorMessage:e.t0.response.data.errors}),w.push("/login");case 14:case"end":return e.stop()}},e,this,[[1,9]])})),a.state={userName:"",password:"",errorMessage:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.userName,n=t.password;return r.a.createElement("div",{id:"login"},r.a.createElement("h1",null,"\u756a\u8304\u95f9\u949f"),r.a.createElement("div",{className:"errorText"},this.state.errorMessage),r.a.createElement(M.a,{placeholder:"name",value:a,onChange:function(t){e.onChange("userName",t.target.value)}}),r.a.createElement(M.a.Password,{value:n,placeholder:"password",onChange:function(t){e.onChange("password",t.target.value)}}),r.a.createElement(z.a,{className:"LoginBtn",type:"primary",onClick:this.submit},"\u767b\u5f55"),r.a.createElement("p",null,r.a.createElement(ve.a,{to:"/signup"},"\u521b\u5efa\u4e00\u4e2a\u8d26\u53f7")))}}]),t}(n.Component)),Ee=(a(426),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChangeUserName=function(e){a.setState({userName:e.target.value})},a.onChangePassword=function(e){a.setState({password:e.target.value})},a.onChangePasswordConfirmation=function(e){a.setState({passwordConfirmation:e.target.value})},a.submit=Object(g.a)(O.a.mark(function e(){var t,n,r,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.userName,r=t.password,o=t.passwordConfirmation,e.prev=1,e.next=4,C.post("sign_up/user",{account:n,password:r,password_confirmation:o});case 4:w.push("/"),console.log("signup success..."),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])})),a.state={userName:"",password:"",passwordConfirmation:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.userName,a=e.password,n=e.passwordConfirmation;return r.a.createElement("div",{id:"signUp"},r.a.createElement("h1",null,"\u756a\u8304\u95f9\u949f"),r.a.createElement(M.a,{placeholder:"name",value:t,onChange:this.onChangeUserName}),r.a.createElement(M.a.Password,{value:a,placeholder:"password",onChange:this.onChangePassword}),r.a.createElement(M.a.Password,{value:n,placeholder:"confirm password",onChange:this.onChangePasswordConfirmation}),r.a.createElement(z.a,{className:"signUpBtn",type:"primary",onClick:this.submit},"\u6ce8\u518c"),r.a.createElement("p",null,"\u5982\u679c\u4f60\u6709\u8d26\u53f7\uff0c\u8bf7\u7acb\u5373 ",r.a.createElement(ve.a,{to:"/login"},"\u767b\u5f55")))}}]),t}(r.a.Component)),Oe=a(73),ge=Object(Oe.b)({todos:J,tomatoes:ne}),ye=Object(Oe.c)(ge),je=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:ye},r.a.createElement(m.a,{history:w},r.a.createElement("div",null,r.a.createElement(p.a,{exact:!0,path:"/",component:fe}),r.a.createElement(p.a,{path:"/login",component:be}),r.a.createElement(p.a,{path:"/signup",component:Ee}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[202,1,2]]]);
//# sourceMappingURL=main.6045e2ee.chunk.js.map